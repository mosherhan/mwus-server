(function(d){typeof define=="function"&&define.amd?define(d):d()})(function(){"use strict";const d="sf",P=`${d}-debug`,ft=`${d}-global-step-delay`,Et=`${d}-save-progress`,ht=`${d}-prefill-url`,G=`${d}_fill`,K=`${d}-step`,At=`${d}-set-step-progress`,St=`${d}-set-step-index`,k=`${d}-next-step-delay`,_=`${d}-goto`,mt=`${d}-force-goto`,pt=`${d}-reset`,L=`${d}-bind-enter`,M=`${d}-bind-backspace`,X=`${d}-logic`,W=`${d}-logic-goto`,Y=5,x=`${d}-logic-fallback`,bt=`${d}-step-animation`,yt=`${d}-step-animation-duration`,_t=`${d}-step-animation-ease`,j=`${d}-el`,O=`${d}-error`,w=`${d}-error-class`,z=`${d}-validation`,C=`${d}-checkbox-group`,Tt=`${d}-checkbox-bind-key`,Nt=`${d}-radio-bind-key`,Z=`${d}-react`,J=`${d}-score`,Q=`${d}-score-calc`,It=5,tt=`${d}-noflash`,vt=`${d}-override-webflow`,et=["fade","slide-top","slide-left","slide-bottom","slide-right","none"],kt={fade:"fade","slide-top":"slide-bottom","slide-left":"slide-right","slide-bottom":"slide-top","slide-right":"slide-left",none:"none"},F=et[0],Ot=300,Ct="ease-in",m={BEFORE_STEP_CHANGE:"BEFORE_STEP_CHANGE",ON_STEP_CHANGE:"ON_STEP_CHANGE",BEFORE_FORM_SUBMIT:"BEFORE_FORM_SUBMIT",ON_FORM_SUBMIT:"ON_FORM_SUBMIT",ON_INPUT_CHANGE:"ON_INPUT_CHANGE",ON_INPUT_KEYUP:"ON_INPUT_KEYUP"},D="sf-react-hide",U="sf-data",nt="v2.1.8",$t="v2",rt=-9999,Rt=()=>{let t="";const n="0123456789abcdef";for(let r=0;r<36;r++)r===8||r===13||r===18||r===23?t+="-":r===14?t+="4":r===19?t+=n.charAt(Math.floor(Math.random()*4)+8):t+=n.charAt(Math.floor(Math.random()*16));return t},I=new Map,wt=(t,n)=>(I.has(t)||I.set(t,new Set),I.get(t).add(n),()=>{I.get(t).delete(n)}),Lt=(t,n=void 0)=>{const r=[];return I.has(t)&&Array.from(I.get(t).values()).forEach(i=>{if(i&&typeof i=="function"){const o=i(n);r.push(o)}else r.push(void 0)}),r},xt=()=>{const t=Rt();return{id:t,on:(i,o)=>wt(`${t}_${i}`,o),emit:(i,o=void 0)=>Lt(`${t}_${i}`,o),unRegisterAll:()=>{Array.from(I.keys()).forEach(i=>{i.startsWith(`${t}_`)&&I.delete(i)})}}},Pt=()=>{if(!document.querySelector(`style[id="${d}-style"]`)){var t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("id",`${d}-style`),t.innerHTML=`.${D} { display: none !important; }`,document.getElementsByTagName("head")[0].appendChild(t)}},Mt=t=>{const n={};return new FormData(t).forEach((r,e)=>{if(!Reflect.has(n,e)){n[e]=r;return}Array.isArray(n[e])||(n[e]=[n[e]]),n[e].push(r)}),n},Ft=["background-color:#15181E;","color:#fff;","padding:4px 8px;","border-radius:4px;"].join(" "),$=["padding:4px 8px;","border-radius:4px;"].join(" ");let H=0;const Dt=(t,n)=>{let r=[];n.formContainer.querySelectorAll(`[${O}]`).forEach(o=>{n.formContainer.querySelector(`[name="${o.getAttribute(O)}"],[${C}="${o.getAttribute(O)}"]`)||r.push(o)});const i=`#${H} Debug Data (${n.formName||"Unnamed Form"})${n.formContainer.checkVisibility()?"":" \u26A0\uFE0F Hidden"}`;console.groupCollapsed(`%c${i}`,Ft),console.group("%cForm Data",$),console.log(t.data),console.groupEnd("Form Data"),console.log(`%cStep Count: ${t.stepCount}`,$),console.log(`%cProgress: ${t.progress}%`,$),console.group("%cScores",$),console.log(t.scores),console.groupEnd("Scores"),console.group("%cNavigation Stack",$),console.log(n.navigationStack.map(o=>({"Step Name":o.name}))),console.groupEnd("Navigation Stack"),r.length&&(console.group("%cOrphan Error Elements",$),console.log("Total Orphan Errors",r.length),r.forEach((o,s)=>{console.log(`#${s+1} Unable to locate input element associated with the error element having ${o.getAttribute(O)}`),console.log(o)}),console.groupEnd("Orphan Error Elements")),console.groupEnd(i),H=H+1},V=t=>{switch(t.nodeName){case"INPUT":switch(t.type){case"hidden":return"HIDDEN";case"text":return"TEXT";case"number":return"NUMBER";case"email":return"EMAIL";case"password":return"PASSWORD";case"tel":return"PHONE";case"checkbox":return"CHECKBOX";case"radio":return"RADIO";case"range":return"RANGE";case"color":return"COLOR";case"search":return"SEARCH";case"date":return"DATE";case"month":return"MONTH";case"week":return"WEEK";case"time":return"TIME";case"datetime-local":return"DATE_AND_TIME";case"url":return"URL";case"file":return"FILE";case"reset":return"RESET";case"submit":return"SUBMIT";default:return"GENERIC_INPUT"}case"SELECT":return"SELECT";case"TEXTAREA":return"TEXTAREA";default:if(t.hasAttribute(C))return"CHECKBOX_GROUP"}return"UNKNOWN"},v=(t,n=!0)=>{const r=t.replace(/^[a-zA-Z0-9]*\((.*)\)$/g,"$1");return n?r.split(",").map(e=>e.trim()):r.trim()},ot=(t,n)=>{try{if(t.nextElementSibling&&(t.nextElementSibling.className.includes("error")||t.nextElementSibling.className.includes("invalid")||t.nextElementSibling.className.includes("fail"))&&!n.includes(t.nextElementSibling))return t.nextElementSibling}catch{console.log("Sibling error element is not valid element. Please, wrap your SVG or canvas element to a div.",t);return}},Ut=(t,n)=>{try{if(t.previousElementSibling&&(t.previousElementSibling.className.includes("error")||t.previousElementSibling.className.includes("invalid")||t.previousElementSibling.className.includes("fail"))&&!n.includes(t.previousElementSibling))return t.previousElementSibling}catch{console.error("Previous Sibling error element is not valid element. Please, wrap your SVG or canvas element to a div.",t);return}},Ht=(t,n)=>{try{if(t.nextElementSibling&&t.nextElementSibling.nextElementSibling&&(t.nextElementSibling.nextElementSibling.className.includes("error")||t.nextElementSibling.nextElementSibling.className.includes("invalid")||t.nextElementSibling.nextElementSibling.className.includes("fail"))&&!n.includes(t.nextElementSibling.nextElementSibling))return t.nextElementSibling.nextElementSibling}catch{console.error("Sibling error element is not valid element. Please, wrap your SVG or canvas element to a div.",t);return}},Vt=(t,n)=>{try{if(t.parentElement&&(t.parentElement.hasAttribute(w)||t.className.includes(" sf-"))&&!n.includes(t.parentElement))return t.parentElement}catch{console.error("Parent error element is not valid element. Please, wrap your SVG or canvas element to a div.",t);return}},qt=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),Bt=t=>{try{const n=new URL(t);return n.protocol==="http:"||n.protocol==="https:"}catch{return!1}},Gt=(t="")=>t.split(/\s+|\p{P}/u).filter(Boolean).length,Kt=(t,n,r,e,i)=>{let o="^";return n!==null&&n>0?o+=`(?=.*\\d{${n},})`:n===0&&(o+="(?!.*\\d)"),r!==null&&r>0?o+=`(?=.*[a-z]{${r},})`:r===0&&(o+="(?!.*[a-z])"),e!==null&&e>0?o+=`(?=.*[A-Z]{${e},})`:e===0&&(o+="(?!.*[A-Z])"),i!==null&&i>0?o+=`(?=.*[!@#$%^&*()_+\\-=\\[\\]{};':"\\\\|,.<>\\/?]{${i},})`:i===0&&(o+=`(?!.*[!@#$%^&*()_+\\-=\\[\\]{};':"\\\\|,.<>\\/?])`),o+=".+$",new RegExp(o).test(t)},Xt=t=>/^words\(([0-9]+(,[0-9]+)*)\)$/.test(t)?"WORD":/^length\(([0-9]+(,[0-9]+)*)\)$/.test(t)?"LENGTH":/^minmax\(([.0-9]+(,[.0-9]+)*)\)$/.test(t)?"MINMAX":/^checkbox\(([0-9]+(,[0-9]+)*)\)$/.test(t)?"CHECKBOX":/^hook\((.*)+\)$/.test(t)?"CUSTOM_HOOK":/^must\((([0-9]+|any)+,([0-9]+|any)+,([0-9]+|any)+,([0-9]+|any)+)\)$/.test(t)?"MUST_HAVE":"UNKNOWN",it=async(t,n,r,e,i)=>{switch(t){case"LENGTH":return!0;case"MINMAX":return!0;case"MUST_HAVE":{const o=v(n);if(o.length===4){const s=o.map(c=>c==="any"?null:isFinite(parseInt(c))?parseInt(c):0);return Kt(r,...s)}else console.error(`Invalid must have instruction: ${n}`,i)}return!1;case"WORD":{const o=v(n),s=Gt(r);if(o.length){const c=o[0],g=o[1];if(o.length>1){if(isFinite(parseInt(c))&&isFinite(parseInt(g)))return s>=parseInt(c)&&s<=parseInt(g)}else if(c&&isFinite(parseInt(c)))return s>=parseInt(c)}}return console.error(`Invalid word count instruction ${n}`,i),!1;case"CHECKBOX":{const o=v(n),s=r;if(o.length){const c=o[0],g=o[1];if(o.length>1){if(isFinite(parseInt(c))&&isFinite(parseInt(g)))return s>=parseInt(c)&&s<=parseInt(g)}else if(c&&isFinite(parseInt(c)))return s>=parseInt(c)}return console.error(`Invalid checkbox validation instruction ${n}`,i),!1}case"CUSTOM_HOOK":{const o=n.replace("hook(","").replace(")",""),s=e.inputValidationHook.getHook(o);return s?await s({data:e.getFormData(),stepCount:e.navigationStack&&e.navigationStack.length?e.navigationStack[e.navigationStack.length-1].index:0,progress:e.navigationStack&&e.navigationStack.length?e.navigationStack[e.navigationStack.length-1].stepProgressValue:0})===!0:(console.error("No custom hook found",i),!1)}case"UNKNOWN":default:return console.error(`Invalid "${n}" validation instruction`,i),!1}},Wt=t=>{const n=[];return t.steps.forEach(e=>{const i=Array.from(e.el.querySelectorAll("input, textarea, select"));Array.from(e.el.querySelectorAll(`[${C}]`)).forEach(o=>{i.push(o)}),i.forEach(o=>{const{isValid:s,onChange:c,removeEventListener:g,isRequired:a,name:u,type:l,checkVisibility:f}=jt(o,e,t);n.push({name:u,inputElement:o,isValid:s,removeEventListener:g,onChange:c,stepRef:e,type:l,isRequired:a,checkVisibility:f})})}),{inputs:n,validateAllInputsOnStep:e=>new Promise((i,o)=>{const s=n.filter(c=>c.stepRef.el===e.el);Promise.all(s.map(c=>c.isValid())).then(c=>{c.includes(!1)?i(!1):i(!0)}).catch(o)})}},Yt=(t,n)=>{if(t.hasAttribute("name")&&t.getAttribute("name").length>0||t.hasAttribute(C)){const r=t.hasAttribute(C)?t.getAttribute(C):t.name,e=Array.from(n.querySelectorAll(`[${O}="${r}"], [${O}="${r.replace("-"," ")}"]`));if(t.hasAttribute(w))e.push(t);else if(t.classList&&t.classList.length>=3){let l=t.classList[t.classList.length-2];l&&(l.includes("error")||l.includes("invalid")||l.includes("fail"))&&(e.push(t),t.setAttribute(w,l))}const i=ot(t,e);i&&e.push(i);const o=Ut(t,e);o&&e.push(o);const s=Ht(t,e);s&&e.push(s);const c=Vt(t,e);if(c&&e.push(c),t.parentElement){const l=ot(t.parentElement,e);l&&e.push(l)}const g=e.map(l=>{if(l.hasAttribute(w)){let S=l.getAttribute(w);return l.classList.remove(S),{el:l,type:"class",className:S,defaultDisplay:""}}else if(l.className.includes(" sf-")){let S="";if(l.classList.forEach((E,T)=>{T!==0&&E.includes("sf-")&&(E.includes("error")||E.includes("invalid")||E.includes("fail"))&&(S=E)}),S)return{el:l,type:"class",className:S,defaultDisplay:""}}const f=l.hasAttribute("sf-error-set")?l.getAttribute("sf-error-set")||"block":getComputedStyle(l).display||"block";return l.setAttribute("sf-error-set",f),l.style.display="none",{className:"",type:"visibility",el:l,defaultDisplay:f==="none"?"block":f}});return{showError:()=>{g.forEach(l=>{l.type==="class"?l.el.classList.add(l.className):(l.el.style.display=l.defaultDisplay,l.el.style.opacity="0",requestAnimationFrame(()=>{l.el.style.opacity="1"}))})},hideError:()=>{g.forEach(l=>{if(l.type==="class")l.el.classList.remove(l.className);else{let f=0;try{f=parseInt(getComputedStyle(l.el).transitionDuration.replace("ms","").replace("s",""))*1e3}catch{}l.el.style.opacity="0",setTimeout(()=>{l.el.style.display="none"},f)}})}}}return{showError(){},hideError(){}}},jt=(t,n,r)=>{const e=r.form,i=V(t),o=t.hasAttribute("required");o&&(t.removeAttribute("required"),i==="RADIO"&&t.setAttribute(`${d}-radio-required`,"required"));const s=Yt(t,e),c=t.hasAttribute(z),g=(t.getAttribute(z)||"").replace(/ /g,""),a=c?Xt(g):"";if(a==="LENGTH"){const A=v(g);if(A.length){const p=A[0],N=A[1];p&&t.setAttribute("minlength",p),N&&t.setAttribute("maxlength",N)}}if(a==="MINMAX"){const A=v(g);if(A.length){const p=A[0],N=A[1];p&&t.setAttribute("min",p),N&&t.setAttribute("max",N)}}const u=()=>t.checkVisibility(),l=async()=>{if(!u())return!0;switch(i){case"RESET":case"HIDDEN":case"SUBMIT":case"UNKNOWN":return!0;case"CHECKBOX_GROUP":{let A=!0;if(c&&(a==="CHECKBOX"||a==="CUSTOM_HOOK")){const p=Array.from(t.querySelectorAll('input[type="checkbox"]')).filter(y=>y.checked).length;A=await it(a,g,p,r,t)}return A?(s.hideError(),!0):(s.showError(),!1)}case"RADIO":{let A=!0;return n.el.querySelectorAll(`input[type="radio"][name=${t.name}][${d}-radio-required]`).length===0?!0:(A=Array.from(n.el.querySelectorAll(`input[type="radio"][name=${t.name}]`)).filter(y=>y.checked).length>0,A?(s.hideError(),!0):(s.showError(),!1))}default:{const A=r.getFormData()[t.getAttribute("name")],p=t.checkValidity();let y=o?!!(A!==null&&A):!0;return o&&y&&i==="EMAIL"&&(y=qt(A)),o&&y&&i==="URL"&&(y=Bt(A)),o&&y&&!p&&(y=!1),y&&c&&(y=await it(a,g,A,r,t)),y?(s.hideError(),!0):(s.showError(),!1)}}},f=()=>{t.removeEventListener("blur",l),t.addEventListener("blur",l)},S=()=>{requestAnimationFrame(()=>{r.callbackStore.emit(m.ON_INPUT_CHANGE,{data:r.getFormData(),stepCount:r.getCurrentStep()?r.getCurrentStep().index:0,progress:r.getCurrentStep()?r.getCurrentStep().stepProgressValue:0,scores:r.scoreManager.getAllScores()})})};let E=-1,T=!0;const h=()=>{clearTimeout(E),T&&(S(),T=!1),setTimeout(()=>{T=!0},50)};switch(i){case"CHECKBOX_GROUP":case"RESET":case"HIDDEN":case"SUBMIT":case"UNKNOWN":break;case"RANGE":t.addEventListener("input",h),t.addEventListener("change",S);break;default:t.addEventListener("focus",f),t.addEventListener("change",S)}return{onChange:S,isValid:l,removeEventListener:()=>{t.removeEventListener("blur",l),t.removeEventListener("focus",f),t.removeEventListener("change",S),t.removeEventListener("input",h)},name:t.getAttribute("name")||"",type:i,isRequired:o,checkVisibility:u}},zt=()=>{const t=new Map;return{registerHook:(e,i)=>(t.set(e,i),()=>{t.delete(e)}),getHook:e=>{if(t.has(e))return t.get(e)}}},st=t=>t.map(n=>n.name),at=(t,n)=>{if(!/^[0-9a-zA-Z]{1}$/.test(t))return-1;const e=t.toLowerCase().charCodeAt(0);if(e>=97&&e<=122&&n==="letter")return e-97;if(t>="0"&&t<="9"&&n==="number"){const i=parseInt(t,10);return i===0?9:i-1}else return-1},q=(t,n)=>t.index===n.getCurrentStep().index,Zt=t=>t.key==="Backspace"&&t.target&&t.target.nodeName&&t.target.nodeName!=="TEXTAREA"&&t.target.nodeName!=="INPUT",Jt=t=>t.key==="Enter"&&t.target&&t.target.nodeName&&t.target.nodeName!=="TEXTAREA",ct=(t,n)=>{if(typeof t=="number")return"INDEX";if(typeof t=="string"){if(/^[0-9]+$/.test(t))return"STR_INDEX";if(t.startsWith("hook("))return"CUSTOM_CODE_LOGIC";if(t==="logic()")return"ATTR_LOGIC";if(t==="next")return"GO_NEXT";if(t==="prev"||t==="previous"||t==="back")return"GO_PREV";if((t.startsWith("+")||t.startsWith("-"))&&isFinite(parseInt(t)))return"JUMP_VIA_INDEX";if(n.includes(t))return"JUMP_VIA_STEP_NAME";if(t==="submit")return"SUBMIT"}return"UNKNOWN"},Qt=t=>t.querySelectorAll('[type="radio"]').length>0,te=(t,n)=>{const r=Array.from(t.querySelectorAll('[type="radio"]'));if(t.hasAttribute(_)){const e=t.getAttribute(_),i=ct(e,n);r.forEach(o=>{if(o.setAttribute(_,e),i==="ATTR_LOGIC"){for(let s=0;s<Y;s++){const c=`${X}${s===0?"":`-${s}`}`,g=`${W}${s===0?"":`-${s}`}`;o.removeAttribute(c),o.removeAttribute(g),t.hasAttribute(c)&&t.hasAttribute(g)&&(o.setAttribute(c,t.getAttribute(c)),o.setAttribute(g,t.getAttribute(g)))}o.setAttribute(x,t.getAttribute(x))}}),t.removeAttribute(_)}if(t.hasAttribute(k)){const e=t.getAttribute(k);r.forEach(i=>{i.setAttribute(k,e)}),t.removeAttribute(k)}return r.forEach(e=>{e.setAttribute(L,"false")}),r},ee=t=>{const n=st(t.steps),r=[];t.steps.forEach(s=>{const c=Array.from(s.el.querySelectorAll(`:scope [${_}],:scope input[type="submit"]`)).map(u=>Qt(u)?te(u,n):u).flat(),g=re(s,t),a=oe(s,t);c.forEach(u=>{const l=lt(u,s,t);r.push({gotoEl:u,stepRef:s,partOfStep:!0,removeEventListener:()=>{g(),a(),l()}})})});const e=r.map(s=>s.gotoEl);return Array.from(t.formContainer.querySelectorAll(`:scope [${_}]`)).filter(s=>!e.includes(s)).forEach(s=>{const c=lt(s,null,t);r.push({gotoEl:s,stepRef:null,partOfStep:!1,removeEventListener:()=>{c()}})}),Array.from(t.formContainer.querySelectorAll(`[${pt}]`)).forEach(s=>{s.addEventListener("click",()=>{if(t.isSubmitted){t.isSubmitted=!1;const c=t.callbackStore.on(m.ON_STEP_CHANGE,()=>{c(),t.navigationStack=[t.navigationStack.reverse()[0]]});t.viewManager.goto(rt),t.form.reset();const g=t.formContainer.querySelector(".w-form-done");g&&(g.style.display="none"),t.form.style.display=t.defaultFormDisplay.toString()}})}),r},lt=(t,n,r)=>{t.hasAttribute("type")&&t.getAttribute("type")==="submit"&&t.setAttribute(_,"submit");const e=()=>{if(!n){const s=t.getAttribute(_),c=t.hasAttribute(mt);r.viewManager.goto(s,t,c?!1:n===null);return}if(q(n,r)){const s=t.getAttribute(_);s&&r.viewManager.goto(s,t)}},i=s=>{Jt(s)&&q(n,r)&&(s.preventDefault(),s.stopImmediatePropagation(),s.stopPropagation(),requestAnimationFrame(()=>{e()}))},o=s=>{Zt(s)&&q(n,r)&&(s.preventDefault(),s.stopImmediatePropagation(),s.stopPropagation(),requestAnimationFrame(()=>{e()}))};return n&&((t.getAttribute(L)===""||t.getAttribute(L)==="true"||t.getAttribute(_)==="next"&&t.getAttribute(L)!=="false")&&document.addEventListener("keyup",i),(t.getAttribute(M)===""||t.getAttribute(M)==="true"||["prev","previous","back"].includes(t.getAttribute(_))&&t.getAttribute(M)!=="false")&&document.addEventListener("keyup",o)),t.addEventListener("click",e),()=>{t.removeEventListener("click",e),t.removeEventListener("keyup",i),t.removeEventListener("keyup",o)}},ne=()=>{const t=new Map;return{registerHook:(e,i)=>(t.set(e,i),()=>{t.delete(e)}),getHook:e=>{if(t.has(e))return t.get(e)}}},re=(t,n)=>{const r=t.el.getAttribute(Nt)||"number",e=t.el.querySelector("input[type=radio]")!==null;if(r==="none"||e===!1)return;const i=o=>{if(t.index!==n.getCurrentStep().index||o.target&&o.target.tagName==="INPUT")return;const s=at(o.key,r),c=Array.from(t.el.querySelectorAll('input[type="radio"]')).filter(g=>g.checkVisibility())[s];c&&c.click&&requestAnimationFrame(()=>{c.click()})};return document.addEventListener("keyup",i),()=>{document.removeEventListener("keyup",i)}},oe=(t,n)=>{const r=t.el.getAttribute(Tt)||"number",e=t.el.querySelector("input[type=checkbox]")!==null;if(r==="none"||e===!1)return;const i=o=>{if(t.index!==n.getCurrentStep().index||o.target&&o.target.tagName==="INPUT")return;const s=at(o.key,r),c=Array.from(t.el.querySelectorAll('input[type="checkbox"]')).filter(g=>g.checkVisibility())[s];c&&c.click&&requestAnimationFrame(()=>{c.click()})};return document.addEventListener("keyup",i),()=>{document.removeEventListener("keyup",i)}},ie=t=>{const n=t.formContainer.querySelectorAll(`[${j}="progress-bar"]`),r=t.formContainer.querySelectorAll(`[${j}="progress-text"]`),e=s=>{n.length&&n.forEach(c=>{c.style.width=`${Math.round(s)}%`}),r.length&&r.forEach(c=>{c.textContent=`${Math.round(s)}%`})},i=t.callbackStore.on(m.ON_STEP_CHANGE,({progress:s})=>{e(s)}),o=()=>{i()};return e(0),{unregister:o}},se=t=>/^text\((.*)+\)$/.test(t)?"SET_TEXT":/^visibility\((.*)+\)$/.test(t)?"VISIBILITY":/^class\((.*)+\)$/.test(t)?"ADD_OR_REMOVE_CLASS":"UNKNOWN",ae=t=>{const n=Array.from(t.formContainer.querySelectorAll(`[${Z}]`)).map(e=>{const i=e.getAttribute(Z),o=se(i);return o==="UNKNOWN"&&console.error(`Inactivate reactivity attribute ${i}`),{el:e,type:o,instruction:i}}).filter(e=>e.type!=="UNKNOWN").map(e=>{let i=()=>{};switch(e.type){case"SET_TEXT":{const a=v(e.instruction,!1);i=new Function("$f,$s,$p,$v",`return ${a}`)}break;case"VISIBILITY":{const a=v(e.instruction,!1);i=new Function("$f,$s,$p,$v",`return !!(${a});`)}break;case"ADD_OR_REMOVE_CLASS":try{const a=v(e.instruction),u=a.pop().trim(),l=a.join(",");i=new Function("$f,$s,$p,$v",`return {isValid:!!(${l}),className:"${u}"};`)}catch(a){console.error(`Failed to execute reactive instruction ${e.instruction}`),console.error(a)}break}const o=a=>{const{data:u,progress:l,stepCount:f,scores:S}=a;switch(e.type){case"SET_TEXT":try{const E=i(u,f,l,S);e.el.textContent=E}catch(E){console.error(`Failed to execute reactive instruction ${e.instruction}`),console.error(E)}break;case"VISIBILITY":try{i(u,f,l,S)?e.el.classList.remove(D):e.el.classList.add(D)}catch(E){console.error(`Failed to execute reactive instruction ${e.instruction}`),console.error(E)}break;case"ADD_OR_REMOVE_CLASS":try{const E=i(u,f,l,S);if(E){const{isValid:T,className:h}=E;T?e.el.classList.add(h):e.el.classList.remove(h)}}catch(E){console.error(`Failed to execute reactive instruction ${e.instruction}`),console.error(E)}break}},s=t.callbackStore.on(m.ON_STEP_CHANGE,o),c=t.callbackStore.on(m.ON_INPUT_CHANGE,o),g=()=>{o({data:t.getFormData(),stepCount:t.getCurrentStep()?t.getCurrentStep().index:0,progress:t.getCurrentStep()?t.getCurrentStep().stepProgressValue:0,scores:t.scoreManager.getAllScores()})};return t.form.addEventListener("keyup",g),()=>{s(),c(),t.form.removeEventListener("keyup",g)}});return{unSubAllEvents:()=>{n.forEach(e=>{e()})}}},ce=t=>{const n=[];for(let r=0;r<It;r++){const e=`${Q}${r===0?"":`-${r}`}`;t.hasAttribute(e)&&n.push(t.getAttribute(e)||"")}return n.filter(r=>(r.length===0&&console.warn(`Invalid score calc instruction ${r}`,t),r.length))},le=t=>/^(add|minus|multiply|divide)\((.*),([a-zA-Z ]+[0-9]*),([0-9 ]+)\)$/.test(t),ue=t=>{const n=t.match(/^(add|minus|multiply|divide)\((.*),([a-zA-Z ]+[0-9]*),([0-9 ]+)\)$/);return n?{operation:n[1],answer:n[2],variable:n[3].trim(),number:parseInt(n[4].trim())}:null},de=t=>{const n=Object.entries(t);return n.length===0?[]:(n.sort((e,i)=>i[1]-e[1]),n.map(e=>e[0]))},ge=(t,n)=>{const r=V(t);try{switch(r){case"TEXT":case"TEXTAREA":case"EMAIL":case"DATE":case"DATE_AND_TIME":case"COLOR":case"MONTH":case"PASSWORD":case"PHONE":case"SEARCH":case"SELECT":case"TIME":case"URL":case"WEEK":return t.value===""&&n.length?!1:n.startsWith("!")?t.value!==n.substring(1):t.value===n;case"CHECKBOX":return t.checked?n==="checked":n!=="checked";case"RADIO":return t.checked?n==="checked":n!=="checked";case"NUMBER":return parseFloat(t.value)===parseFloat(n);case"RANGE":return parseFloat(t.value)===parseFloat(n);default:return!1}}catch(e){return console.error(`Invalid answer format for score : ${n}`),console.error(e),!1}},fe=t=>{const n=t.formContainer.hasAttribute(J);let r={};n&&t.formContainer.getAttribute(J).split(",").forEach(s=>{/^([a-zA-Z]+([0-9]*))$/.test(s)?r[s]=0:console.error(`Invalid score variable format : ${s}`)});const e=()=>{const o={...r},s=[];t.navigationStack.forEach(a=>{s.includes(a)||s.push(a)}),t.inputManager.inputs.filter(a=>s.includes(a.stepRef)).filter(a=>a.inputElement.hasAttribute(Q)).map(a=>({input:a,index:s.indexOf(a.stepRef)})).sort((a,u)=>a.index-u.index).forEach(({input:a})=>{ce(a.inputElement).forEach(l=>{if(le(l)){const f=ue(l);if(ge(a.inputElement,f.answer)&&f.variable in o)switch(f.operation){case"add":o[f.variable]=o[f.variable]+f.number;break;case"minus":o[f.variable]=o[f.variable]-f.number;break;case"multiply":o[f.variable]=o[f.variable]*f.number;break;case"divide":o[f.variable]=o[f.variable]/f.number;break;default:console.error(`Invalid score instruction ${l}`);break}}else console.error(`Invalid score instruction ${l}`)})});const g=de(o);return o._rank=g,o};return{getAllScores:()=>e()}},Ee=(t,n)=>{const r=Array.from(t.querySelectorAll(`:scope [${K}]`)).filter(i=>getComputedStyle(i).display!=="none");return r.map((i,o)=>{const s=getComputedStyle(i).display;return n||(i.style.display="none"),{name:i.getAttribute(K),defaultDisplay:s||"block",stepProgressValue:Math.round(parseFloat(i.getAttribute(At)||`${(o+1)/r.length*100}`)),stepCountValue:parseInt(i.getAttribute(St)||`${o+1}`),nextStepDelay:i.hasAttribute(k)?parseInt(i.getAttribute(k)||i.getAttribute(ft)||"0"):0,index:o,el:i}})},ut=()=>{let t={};if(localStorage.getItem(U))try{t=JSON.parse(localStorage.getItem(U))}catch(n){console.log("Unable to parse saved form data"),console.error(n)}return t},he=()=>{let t={};var n=location.search.substring(1);if(n)try{t=JSON.parse('{"'+n.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(r,e){return r===""?e:decodeURIComponent(decodeURIComponent(e))})}catch(r){console.log("Unable to parse saved form url"),console.error(r)}return t},dt=(t,n)=>{const r=ut();localStorage.setItem(U,JSON.stringify({...r,[t]:n}))},Ae=t=>{const n=t.formContainer.hasAttribute(Et),r=t.formContainer.hasAttribute(ht),e=()=>{const a=t.getFormData();dt(t.formName,a)},i=()=>{const a=new URLSearchParams,u=t.getFormData();if(a.append(`${d}_form`,t.formName),a.append(G,"true"),Object.keys(u).forEach(l=>{a.append(encodeURIComponent(l),encodeURIComponent(u[l]))}),history.pushState){let l=`${window.location.protocol}//${window.location.host}${window.location.pathname}?${a.toString()}`;window.history.replaceState({path:l},"",l)}},o=()=>{if(dt(t.formName,{}),history.pushState){let a=`${window.location.protocol}//${window.location.host}${window.location.pathname}`;window.history.replaceState({path:a},"",a)}},s=(a,u)=>{Object.keys(u).forEach(l=>{const f=a.querySelector(`[name="${l}"]`);if(f){const S=V(f);try{switch(S){case"TEXT":case"TEXTAREA":case"COLOR":case"DATE":case"DATE_AND_TIME":case"EMAIL":case"MONTH":case"NUMBER":case"PASSWORD":case"PHONE":case"RANGE":case"SEARCH":case"SELECT":case"TIME":case"URL":case"WEEK":f.value=u[l];break;case"CHECKBOX":f.click();break;case"RADIO":{const E=a.querySelector(`[name="${l}"][value="${u[l]}"]`);E&&E.previousElementSibling&&E.previousElementSibling.className.includes("w-radio-input")&&E.previousElementSibling.classList.add("w--redirected-checked"),E&&E.click()}break}}catch(E){console.error(`Unable to set data for element ${l}`),console.error(E)}}})};let c=[];const g=he();if(r||G in g)try{if(`${d}_form`in g&&g[`${d}_form`]===encodeURIComponent(t.formName)){const a=t.form,{[`${d}_form`]:u,...l}=g;s(a,l)}r&&(c.push(t.callbackStore.on(m.ON_INPUT_CHANGE,i)),c.push(t.callbackStore.on(m.ON_INPUT_KEYUP,i)),c.push(t.callbackStore.on(m.ON_STEP_CHANGE,i)))}catch(a){console.log("Unable to load data from query parameter"),console.error(a)}if(n){const a=ut();if(t.formName in a){const u=a[t.formName],l=t.form;s(l,u)}c.push(t.callbackStore.on(m.ON_INPUT_CHANGE,e)),c.push(t.callbackStore.on(m.ON_INPUT_KEYUP,e)),c.push(t.callbackStore.on(m.ON_STEP_CHANGE,e))}return c.push(t.callbackStore.on(m.ON_FORM_SUBMIT,o)),{unSubscribe(){c.forEach(a=>a())}}},Se=(t,n,r,e)=>{const i=`all ${n}ms ${r}`;return new Promise(o=>{if(!e){o();return}let s=0;const c=()=>{s=s+1,s>=2&&(e.el.style.display="none",e.el.removeEventListener("transitionend",c),o())};switch(n===0&&requestAnimationFrame(()=>{c()}),t){case"fade":s=1,e.el.style.transition=i,e.el.addEventListener("transitionend",c),requestAnimationFrame(()=>{e.el.style.opacity="0"});break;case"slide-top":e.el.style.transition=i,e.el.addEventListener("transitionend",c),requestAnimationFrame(()=>{e.el.style.transform="translateY(100px)",e.el.style.opacity="0"});break;case"slide-left":e.el.style.transition=i,e.el.addEventListener("transitionend",c),requestAnimationFrame(()=>{e.el.style.transform="translateX(100px)",e.el.style.opacity="0"});break;case"slide-bottom":e.el.style.transition=i,e.el.addEventListener("transitionend",c),requestAnimationFrame(()=>{e.el.style.transform="translateY(-100px)",e.el.style.opacity="0"});break;case"slide-right":e.el.style.transition=i,requestAnimationFrame(()=>{e.el.addEventListener("transitionend",c),e.el.style.transform="translateX(-100px)",e.el.style.opacity="0"});break;case"none":default:e.el.style.display="none",o();break}})},me=(t,n,r,e)=>{const i=`all ${n}ms ${r}`;return new Promise(o=>{if(!e){o();return}switch(e.el.style.transition="",t){case"fade":e.el.style.opacity="0",e.el.style.display=e.defaultDisplay,e.el.style.transition=i,requestAnimationFrame(()=>{e.el.style.opacity="1"}),o();break;case"slide-top":e.el.style.opacity="0",e.el.style.transform="translateY(-100px)",e.el.style.display=e.defaultDisplay,e.el.style.transition=i,requestAnimationFrame(()=>{e.el.style.transform="translateY(0px)",e.el.style.opacity="1"}),o();break;case"slide-left":e.el.style.opacity="0",e.el.style.transform="translateX(-100px)",e.el.style.display=e.defaultDisplay,e.el.style.transition=i,requestAnimationFrame(()=>{e.el.style.transform="translateX(0px)",e.el.style.opacity="1"}),o();break;case"slide-bottom":e.el.style.opacity="0",e.el.style.transform="translateY(100px)",e.el.style.display=e.defaultDisplay,e.el.style.transition=i,requestAnimationFrame(()=>{e.el.style.transform="translateX(0px)",e.el.style.opacity="1"}),o();break;case"slide-right":e.el.style.opacity="0",e.el.style.transform="translateX(100px)",e.el.style.display=e.defaultDisplay,e.el.style.transition=i,requestAnimationFrame(()=>{e.el.style.transform="translateX(0px)",e.el.style.opacity="1"}),o();break;case"none":default:e.el.style.display=e.defaultDisplay,o();break}})},pe=(t,n,r,e,i)=>new Promise((o,s)=>{Se(t,n,r,e).then(()=>{requestAnimationFrame(()=>{me(t,n,r,i).then(()=>{o()}).catch(s)})}).catch(s)}),be=t=>{const n=[];for(let r=0;r<Y;r++){const e=`${X}${r===0?"":`-${r}`}`,i=`${W}${r===0?"":`-${r}`}`;t.hasAttribute(e)&&t.hasAttribute(i)&&n.push({logic:t.getAttribute(e)||"",step:t.getAttribute(i)||""})}return n.filter(r=>((r.logic.length===0||r.step.length===0)&&console.warn(`Invalid goto logic instruction ${r.logic}=${r.step}`,t),r.logic.length&&r.step.length))};function ye(t,n,r,e){let i="";return t.forEach(o=>{i.length===0&&new Function("$f,$s,$p,$v",`return !!(${o.logic});`)(r.getFormData(),e?e.index:0,e?e.stepProgressValue:0,r.scoreManager.getAllScores())&&(i=o.step)}),i.length?i:n}const _e=t=>{const n=st(t.steps),r=(e,i,o=!1)=>{let s=e;const c=s===rt;if(c&&(s=0),t.isSubmitted){console.error("Form already submitted please try resetting the form");return}const g=ct(s,n);let a=t.getCurrentStep(),u=-1,l=!0,f=(a?a.nextStepDelay:0)||0;switch(g){case"GO_NEXT":a&&t.steps[a.index+1]&&(u=t.steps[a.index+1].index);break;case"GO_PREV":t.navigationStack.length>1&&(u=t.navigationStack[t.navigationStack.length-2].index,f=0,l=!1);break;case"INDEX":s<t.steps.length&&s>=0&&(u=s);break;case"STR_INDEX":parseInt(s)<t.steps.length&&parseInt(s)>=0&&(u=parseInt(s));break;case"JUMP_VIA_INDEX":{const h=a?a.index+parseInt(s):parseInt(s);h>=0&&h<t.steps.length&&(u=t.steps[h].index)}break;case"JUMP_VIA_STEP_NAME":{const h=n.indexOf(s);h>=0&&(u=h)}break;case"ATTR_LOGIC":try{const h=i.hasAttribute(x),b=i.getAttribute(x)||"";if(h&&b.length){const A=n.indexOf(b);if(!(A>=0)){console.error(`Default step for logic is not valid, could not locate ${b} step`);return}const p=be(i),N=ye(p,A,t,a);r(N,i,o)}else console.error("Please add default goto step name",i)}catch(h){console.error("Invalid goto logic instruction",i),console.error(h)}break;case"CUSTOM_CODE_LOGIC":{const h=s.replace("hook(","").replace(")",""),b=t.navigationHook.getHook(h);if(b)Promise.all([b({data:t.getFormData(),stepCount:a?a.index:0,progress:a?a.stepProgressValue:0,scores:t.scoreManager.getAllScores()})]).then(([A])=>{r(A,i,o)}).catch(console.error);else{console.error("No custom hook found",i);return}}break;case"SUBMIT":u=a.index||0;break;case"UNKNOWN":default:throw new Error(`Goto Error: ${s} instruction is invalid or not found`)}if(g==="CUSTOM_CODE_LOGIC"||g==="ATTR_LOGIC")return;if(u<0||u>=t.steps.length)throw new Error(`Invalid ${s} goto instruction or not found`);if(o&&!(t.navigationStack.filter(b=>b.index===t.steps[u].index).length>0)||a&&a.index===u&&g!=="SUBMIT")return;const S=t.navigationStack.filter(h=>h===t.steps[u]).length>0,E=a;if(S&&E&&o){let h=!1;for(;!h;)if(t.navigationStack.length){const b=t.navigationStack.pop();b&&b.index===u&&(h=!0)}else h=!0;a=E}const T=()=>{let h=t.animation.type,b=c?0:t.animation.duration,A=t.animation.ease;t.callbackStore.emit(m.BEFORE_STEP_CHANGE,{data:t.getFormData(),stepCount:a?a.index:0,progress:a?a.stepProgressValue:0,scores:t.scoreManager.getAllScores()}),l?t.navigationStack.push(t.steps[u]):(h=kt[h]||F,t.navigationStack.pop());const p=()=>{requestAnimationFrame(()=>{t.callbackStore.emit(m.ON_STEP_CHANGE,{data:t.getFormData(),stepCount:t.steps[u]?t.steps[u].index:0,progress:t.steps[u]?t.steps[u].stepProgressValue:0,scores:t.scoreManager.getAllScores()}),pe(h,b,A,a,t.steps[u])})};f?setTimeout(()=>{p()},f):p()};a&&l&&!o?t.inputManager.validateAllInputsOnStep(a).then(h=>{h&&(g==="SUBMIT"?(t.callbackStore.emit(m.ON_FORM_SUBMIT,{data:t.getFormData(),stepCount:t.steps[u]?t.steps[u].index:0,progress:t.steps[u]?t.steps[u].stepProgressValue:0,scores:t.scoreManager.getAllScores()}),window.jQuery&&window.jQuery(t.form)&&window.jQuery(t.form).data&&window.jQuery(t.form).data()[".wForm"]&&t.preventWebflowFormSubmit===!1&&(t.isSubmitted=!0,window.jQuery(t.form).data()[".wForm"].handler(window.jQuery(t.form).data()[".wForm"])),t.preventWebflowFormSubmit===!0&&(t.form.onsubmit=()=>!0)):T())}).catch(console.error):T()};return r(0,null),{goto:r}},R=[],B=t=>R.filter(n=>n.formName===t)[0];class gt{constructor(n,r){if(this.version=nt,typeof n=="string")this.formContainer=document.querySelector(n),this.form=this.formContainer.querySelector("form");else if(typeof n=="object"&&n instanceof HTMLElement)this.formContainer=n,this.form=this.formContainer.querySelector("form");else throw new Error("Please pass a valid selector or form element");if(!this.form)throw new Error(`Superform initialization failed. The "sf" attribute must be placed on the form container. For support, please refer to the documentation here.

here: https://deltaclan.gitbook.io/superform-v2-docs/essentials/form-container`);if(this.form.nodeName!=="FORM")throw new Error(`Superform initialization failed. The "sf" attribute must be placed on the form container. For support, please refer to the documentation here.

here: https://deltaclan.gitbook.io/superform-v2-docs/essentials/form-container`);setTimeout(()=>{this.defaultFormDisplay=getComputedStyle(this.formContainer.querySelector("form")).display}),this.isSubmitted=!1,Pt(),this.navigationStack=[],this.callbackStore=xt(),this.formName=this.formContainer.getAttribute(d)||this.form.getAttribute("name")||`${d}_${R.length}`,this.animation={type:this.formContainer.getAttribute(bt)||F,duration:this.formContainer.getAttribute(yt)||Ot,ease:this.formContainer.getAttribute(_t)||Ct},this.offlineStorage=Ae(this),et.includes(this.animation.type)||(this.animation.type=F),this.steps=Ee(this.form,r.debugModeSteps===!0),this.inputValidationHook=zt(),this.inputManager=Wt(this),this.scoreManager=fe(this),this.navigationElements=ee(this),this.navigationHook=ne(),this.preventWebflowFormSubmit=this.formContainer.hasAttribute(vt),this.viewManager=_e(this),this.progress=ie(this),this.reactivity=ae(this),this.form.onsubmit=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},r&&typeof r=="object"&&r.debugMode&&this.onStepChange(e=>Dt(e,this)),R.push(this)}getFormData(){return Mt(this.form)}getCurrentStep(){return this.navigationStack[this.navigationStack.length-1]}registerNavigationHook(n,r){this.navigationHook.registerHook(n,r)}registerInputValidationHook(n,r){this.inputValidationHook.registerHook(n,r)}beforeStepChange(n){this.callbackStore.on(m.BEFORE_STEP_CHANGE,n)}onStepChange(n){this.callbackStore.on(m.ON_STEP_CHANGE,n)}onFormSubmit(n){this.callbackStore.on(m.ON_FORM_SUBMIT,n)}}window.Superform=gt,console.log("Powered by Superform",$t);const Te=performance.now();window.SuperformAPI=window.SuperformAPI||[],function(){if("SuperformAPI"in window&&"allForms"in window.SuperformAPI&&"getForm"in window.SuperformAPI){console.error("It seems like there are multiple Superform scripts added to your page. This might be causing some conflicts. Please remove any duplicate scripts.");return}let t=!1,n=!1;document.querySelector(`script[${P}]`)&&(t=!0,document.querySelector(`script[${P}]`).getAttribute(P).includes("steps")&&(n=!0)),Array.from(document.querySelectorAll(`[${d}]`)).forEach(o=>{new gt(o,{debugMode:t,debugModeSteps:n})});const e=()=>{window.SuperformAPI=Object.freeze({allForms:R,version:nt,debugConfig:{debugMode:t,debugModeSteps:n},getForm:B,push(o){typeof o=="function"&&o({allForms:R,getForm:B})}}),Array.from(document.querySelectorAll(`[${tt}]`)).forEach(o=>o.removeAttribute(tt))};window.SuperformAPI&&Array.isArray(window.SuperformAPI)&&window.SuperformAPI.length&&window.SuperformAPI.forEach(o=>{typeof o=="function"&&o({allForms:R,getForm:B})}),e();const i=performance.now();console.log(`Loaded in ${(i-Te).toFixed(2)}ms`)}()});
