<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Client Form</title>
  <link rel="icon" href="../assets/MWUSLOGO.svg" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;

    }

    .form-container {
      max-width: 600px;
      width: 100%;
    }

    h1 {
      font-size: 2rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 10px;
    }

    p.description {
      text-align: center;
      font-size: 0.9rem;
      margin-bottom: 30px;
      color: #bbb;
    }

    .form-row {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-row label {
      flex: 1;
      font-size: 0.95rem;
      font-weight: 500;
      text-align: left;
      margin-bottom: 0;
    }


    .form-row input,
    .form-row textarea,
    .form-row select {
      flex: 2;
      padding: 12px 14px;
      margin-left: 20%;
      border: 1px solid #5c5b5b;
      /* white border added */
      border-radius: 6px;
      background-color: #0e0d0d;
      color: #dedbdb;
      font-size: 1rem;
      margin-bottom: 0;
    }

    input[type="file"] {
      padding: 12px;
      background-color: #111;
      color: #fff;
      border: 1px dashed #444;
    }


    .checkbox-group {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      /* align group to the left */
      gap: 10px;
      margin-bottom: 20px;
      margin-left: 47%;
      margin-right: 8%;
    }

    .checkbox-group label {
      display: flex;
      align-items: right;
      gap: 10px;
      width: 100%;
      max-width: 400px;
      border: 1px solid #5c5b5b;
      border-radius: 6px;
      padding: 10px 20px;
      margin: 4px 0;
      background-color: #0e0d0d;
    }


    .radio-group {
      display: flex;
      flex-direction: row;
      /* ← Horizontal layout */
      justify-content: flex-start;
      align-items: center;
      gap: 30px;
      /* spacing between radio options */
      margin-bottom: 20px;
      padding-left: 10px;
      /* optional: shift whole group slightly right */

      margin-top: 12px;
    }

    .radio-group label {
      display: flex;
      align-items: center;
      gap: 8px;
      border: 1px solid #5c5b5b;
      padding: 10px 0;
      width: 300px;
      border-radius: 6px;
      margin: 0;
    }






    button {
      background-color: #3a3939;
      color: #f3f3f3;
      font-weight: 600;
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      width: 25%;
      margin-top: 10px;
    }

    .button-row {
      display: flex;
      justify-content: space-between;
      /* or use center/gap as needed */
      gap: 20px;
      /* spacing between buttons */
      margin-top: 20px;
    }

    .button-row button {
      flex: 1;
      /* optional: equal width */
    }



    .hidden {
      display: none;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      width: 100%;
      max-width: 600px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 10px;
    }

    .header h1 {
      color: #333;
      font-size: 24px;
      margin-bottom: 5px;
    }

    .header p {
      color: #666;
      font-size: 14px;
    }

    .dropbox {
      width: 100%;
      height: 220px;
      border: 1px solid #2f2f2f;
      border-radius: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      background-color: #101010;
      transition: all 0.3s ease;
      cursor: pointer;
      padding: 20px;
      gap: 15px;
    }

    .dropbox:hover {
      background-color: #090909;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }

    .dropbox.dragover {
      background-color: #272727;
      border-color: #edeef2;
      transform: scale(1.02);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .dropbox-icon {
      font-size: 40px;
      color: #d9dadc;
      margin-bottom: 10px;
    }

    .dropbox-text {
      font-size: 18px;
      color: #c8c9cd;
      margin-bottom: 5px;
      font-weight: 600;
    }

    .dropbox-subtext {
      font-size: 14px;
      color: #666;
      text-align: center;
    }

    .browse-btn {
      background-color: #b1b1b3;
      color: rgb(18, 18, 18);
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.3s;
      font-weight: 500;
      margin-top: 5px;
    }

    .browse-btn:hover {
      background-color: #575758;
    }

    .file-previews {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 15px;
      width: 100%;
    }

    .file-preview {
      background-color: #292828;
      color: #f3f3f3;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      position: relative;
    }

    .file-preview:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
    }

    .preview-img-container {
      height: 150px;
      width: 100%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #444343;
    }

    .preview-img {
      max-width: 100%;
      max-height: 150px;
      object-fit: contain;
    }

    .file-icon {
      font-size: 60px;
      color: #0a0a0a;
    }

    .file-info {
      padding: 12px;
    }

    .file-name {
      font-size: 14px;
      color: #f7f5f5;
      margin-bottom: 5px;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .file-size {
      font-size: 12px;
      color: #f8f6f6;
    }

    .file-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }

    .remove-btn {
      background-color: #ff4d4f;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .remove-btn:hover {
      background-color: #d9363e;
    }

    .upload-notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #eff0f3;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 10px;
      opacity: 0;
      transition: opacity 0.3s, transform 0.3s;
      pointer-events: none;
    }

    .upload-notification.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
      pointer-events: all;
    }

    .upload-notification.success {
      background-color: #363736;
    }

    .upload-notification.error {
      background-color: #ec8f90;
    }

    .notification-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background-color: rgba(255, 255, 255, 0.5);
      width: 100%;
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 3s linear;
    }

    .upload-notification.show .notification-progress {
      transform: scaleX(1);
    }

    .upload-stats {
      background-color: rgb(18, 18, 18);
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      width: 100%;
      margin-top: 10px;
      display: none;
      border: 1px solid #919391;
    }

    .stats-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .stats-title {
      font-size: 16px;
      color: #f3f1f1;
      font-weight: 600;
    }

    .stats-info {
      display: flex;
      gap: 20px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-value {
      font-size: 18px;
      color: #d4d4d7;
      font-weight: 600;
    }

    .stat-label {
      font-size: 12px;
      color: #dddada;
    }

    .progress-bar {
      height: 8px;
      width: 100%;
      background-color: #dbd9d9;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background-color: #dfe0e4;
      width: 0;
      transition: width 0.3s ease;
    }

    .empty-state {
      display: none;
      text-align: center;
      padding: 30px;
      color: #282727;
    }

    /* Responsive adjustments */
    @media (max-width: 600px) {
      .file-previews {
        grid-template-columns: 1fr;
      }

      .dropbox {
        height: 180px;
      }
    }

    input[type="file"] {
      display: none;
    }

    @media (max-width: 768px) {
      .form-row {
        flex-direction: column;
        align-items: stretch;
      }

      .form-row label {
        text-align: left;
        margin-bottom: 5px;
      }
    }
  </style>
</head>

<body>

  <div class="form-container">
    <img style="width: 18%; height: 18%;" src="../assets/MWUSLOGO.svg">

    <!-- PAGE 1 -->
    <form id="formPage1">
      <br>
      <h1 style="text-align: left;"><strong>MWU CLIENT FORM</strong></h1>
      <p class="description" style="text-align: justify;">
        This intake form allows us to gather the critical assets and information needed to budget and plan for a
        fast-track, website design and development effort. You are required to complete this form in order for your
        project to start.
      </p>
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">

      <div class="form-row">
        <label>First Name *</label>
        <input type="text" name="firstName" required>
      </div>
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">

      <div class="form-row">
        <label>Last Name *</label>
        <input type="text" name="lastName" required>
      </div>
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">

      <div class="form-row">
        <label>Phone Number *</label>
        <input type="tel" name="phone" required>
      </div>
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">

      <div class="form-row">
        <label>Email Address *</label>
        <input type="email" name="email" required>
      </div>
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">

      <div class="form-row">
        <label>Company Name *</label>
        <input type="text" name="company" required>
      </div>
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">

      <button type="button" onclick="goToPage2()">Next Page ➜</button>
    </form>

    <!-- PAGE 2 -->
    <form id="formPage2" class="hidden">
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">

      <div class="form-row">
        <label>Project Title *</label>
        <input type="text" name="projectTitle" required>
      </div>
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">

      <label>Project Type * </label>
      <div class="checkbox-group" id="projectTypeGroup">
        <label><input type="checkbox" name="projectType" value="E-Commerce Website"> E-Commerce Website</label>
        <label><input type="checkbox" name="projectType" value="Shopify Website"> Shopify Website</label>
        <label><input type="checkbox" name="projectType" value="Startup Website"> Startup Website</label>
        <label><input type="checkbox" name="projectType" value="Business Website"> Business Website</label>
        <label><input type="checkbox" name="projectType" value="Other"> None of the above / Other</label>
      </div>
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">

      <label>Will you provide assets for your website? *</label>
      <div class="radio-group" id="assetsProvidedGroup">
        <label style="padding-left: 4%;"><input type="radio" name="assetsProvided" value="Yes"> Yes</label>
        <label style="padding-left: 4%;"><input type="radio" name="assetsProvided" value="No"> No</label>
      </div>
      <p style="font-style: italic;">This would include: all copy (about section,logo etc.), images and all kind of
        assets, brand guidelines and so on.
      </p>
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">

      <div class="form-row">
        <label>Reference Website (If any)</label>
        <input type="url" name="reference">
      </div>
      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">



      Upload Document
      <br><br>
      <div class="dropbox" id="dropbox">
        <div class="dropbox-icon">📁</div>
        <div class="dropbox-text">Drop files here</div>
        <div class="dropbox-subtext">Supported formats: JPEG, PNG, PDF (Max 5MB)</div>
        <button type="button" class="browse-btn">Browse Files</button>
        <input type="file" id="fileInput" name="file" multiple hidden>
      </div>

      <div class="upload-stats" style="margin-top: 15px;" id="uploadStats">
        <div class="stats-header">
          <div class="stats-title">Upload Summary</div>
        </div>
        <div class="stats-info">
          <div class="stat-item">
            <div class="stat-value" id="fileCount">0</div>
            <div class="stat-label">Files</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="totalSize">0 KB</div>
            <div class="stat-label">Total Size</div>
          </div>
        </div>
        <div class="progress-bar" style="margin-top: 20px;">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <div style="color: #eff0f3;" class="empty-state" id="emptyState">
        No files uploaded yet
      </div>

      <div style="margin-top: 15px;" class="file-previews" id="filePreviews"></div>


      <div class="upload-notification" id="notification">
        <span id="notificationText">File uploaded successfully!</span>
        <div class="notification-progress"></div>
      </div>



      <hr style="border: none; height: 1px; background-color: #555; margin: 20px 0; opacity: .5;">
      <div class="button-row">
        <button type="button" onclick="goBack()">← Back</button><br><br>

        <button type="submit">Submit ➤</button>
      </div>

    </form>

    <div id="thankYouMessage" class="hidden" style="text-align: left;  padding: 40px;">
      <!-- <img src="your-thank-you-image.svg" alt="Thank You" style="width: 100px;" /> -->
      <p style="text-align: left;">Thank you for taking the time to fill this form. It helps us a lot.
        We will be in touch as soon as possible to discuss your submission.
      </p><br><br><br>
      <h4>MAKE WITH US</h4>
      <a href="https://makewithus.in/" style="color: #00f;">https://makewithus.in/</a>
    </div>

  </div>

  <script>
    const dropbox = document.getElementById('dropbox');
    const fileInput = document.getElementById('fileInput');
    const filePreviews = document.getElementById('filePreviews');
    const notification = document.getElementById('notification');
    const browseBtn = document.querySelector('.browse-btn');
    const uploadStats = document.getElementById('uploadStats');
    const fileCountEl = document.getElementById('fileCount');
    const totalSizeEl = document.getElementById('totalSize');
    const progressFill = document.getElementById('progressFill');
    const emptyState = document.getElementById('emptyState');

    let fileCount = 0;
    let totalSize = 0;

    // Initialize display
    updateDisplay();

    // Prevent default behavior for drag and drop events
    dropbox.addEventListener('dragover', (e) => {
      e.preventDefault();
      dropbox.classList.add('dragover');
    });

    dropbox.addEventListener('dragleave', () => {
      dropbox.classList.remove('dragover');
    });

    // Handle file drop
    dropbox.addEventListener('drop', (e) => {
      e.preventDefault();
      dropbox.classList.remove('dragover');
      const files = e.dataTransfer.files;
      handleFiles(files);
    });

    // Handle file selection through the input
    fileInput.addEventListener('change', (e) => {
      const files = e.target.files;
      handleFiles(files);
    });

    // Trigger file input when dropbox or browse button is clicked
    dropbox.addEventListener('click', () => {
      fileInput.click();
    });

    browseBtn.addEventListener('click', (e) => {
      e.stopPropagation(); // Prevent event bubbling
      fileInput.click();
    });

    // Handle files
    function handleFiles(files) {
      const allowedTypes = ['image/jpeg', 'image/png', 'application/pdf'];
      const maxSize = 5 * 1024 * 1024; // 5 MB

      if (files.length > 0) {
        let validFiles = 0;
        let invalidFiles = 0;

        Array.from(files).forEach(file => {
          if (!allowedTypes.includes(file.type)) {
            showNotification(`${file.name} is not a valid file type.`, 'error');
            invalidFiles++;
            return;
          }

          if (file.size > maxSize) {
            showNotification(`${file.name} is too large. Maximum file size is 5 MB.`, 'error');
            invalidFiles++;
            return;
          }

          // Handle valid file
          displayFilePreview(file);
          validFiles++;
        });

        if (validFiles > 0) {
          simulateUpload(validFiles);
          showNotification(`${validFiles} file${validFiles !== 1 ? 's' : ''} added successfully.`, 'success');
        }

        if (invalidFiles > 0) {
          showNotification(`${invalidFiles} file${invalidFiles !== 1 ? 's' : ''} not added due to errors.`, 'error');
        }
      }
    }

    function displayFilePreview(file) {
      const reader = new FileReader();
      const fileId = `file-${Date.now()}-${Math.floor(Math.random() * 1000)}`;

      reader.onload = function (event) {
        const preview = document.createElement('div');
        preview.classList.add('file-preview');
        preview.id = fileId;

        // Format file size
        const fileSize = formatFileSize(file.size);

        // Determine if it's an image or PDF
        const isImage = file.type.startsWith('image/');

        let previewContent;
        if (isImage) {
          previewContent = `<img src="${event.target.result}" class="preview-img">`;
        } else {
          previewContent = `<div class="file-icon">📄</div>`;
        }

        preview.innerHTML = `
          <div class="preview-img-container">
            ${previewContent}
          </div>
          <div class="file-info">
            <div class="file-name">${file.name}</div>
            <div class="file-size">${fileSize}</div>
            <div class="file-actions">
              <button class="remove-btn">Remove</button>
            </div>
          </div>
        `;

        // Add remove functionality
        const removeBtn = preview.querySelector('.remove-btn');
        removeBtn.addEventListener('click', () => {
          removeFile(fileId, file.size);
        });

        filePreviews.appendChild(preview);

        // Update statistics
        fileCount++;
        totalSize += file.size;
        updateDisplay();
      };

      reader.readAsDataURL(file);
    }

    function removeFile(fileId, size) {
      const fileElement = document.getElementById(fileId);
      if (fileElement) {
        // Animate removal
        fileElement.style.opacity = '0';
        fileElement.style.transform = 'scale(0.9)';

        setTimeout(() => {
          fileElement.remove();

          // Update statistics
          fileCount--;
          totalSize -= size;
          updateDisplay();

          showNotification('File removed', 'success');
        }, 300);
      }

      resetFileInput();
    }

    function updateDisplay() {
      fileCountEl.textContent = fileCount;
      totalSizeEl.textContent = formatFileSize(totalSize);

      if (fileCount > 0) {
        uploadStats.style.display = 'block';
        emptyState.style.display = 'none';
        progressFill.style.width = '100%';
      } else {
        uploadStats.style.display = 'none';
        emptyState.style.display = 'block';
      }
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';

      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));

      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    function showNotification(message, type = 'success') {
      // Clear any existing timeout
      clearTimeout(notification.timeout);

      // Hide notification if it's already showing
      notification.classList.remove('show', 'success', 'error');

      // Set content and show
      document.getElementById('notificationText').textContent = message;
      notification.classList.add('show', type);

      // Reset progress bar
      const progressBar = notification.querySelector('.notification-progress');
      progressBar.style.transition = 'none';
      progressBar.style.transform = 'scaleX(0)';

      // Force reflow to restart animation
      void notification.offsetWidth;

      // Start progress animation
      progressBar.style.transition = 'transform 3s linear';
      progressBar.style.transform = 'scaleX(1)';

      // Auto-hide after 3 seconds
      notification.timeout = setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    function simulateUpload(fileCount) {
      // This would be where you'd actually upload to a server
      // For now we're just showing the progress visually
      progressFill.style.width = '0%';

      setTimeout(() => {
        progressFill.style.width = '30%';

        setTimeout(() => {
          progressFill.style.width = '60%';

          setTimeout(() => {
            progressFill.style.width = '100%';
          }, 200);
        }, 200);
      }, 100);
    }

    // Reset the file input after a file is removed
    function resetFileInput() {
      fileInput.value = '';
    }

    // Initial UI setup
    function initUI() {
      if (fileCount === 0) {
        uploadStats.style.display = 'none';
        emptyState.style.display = 'block';
      }
    }

    // Initialize UI
    initUI();
    function goToPage2() {
      const form1 = document.getElementById('formPage1');
      if (form1.checkValidity()) {
        form1.classList.add('hidden');
        document.getElementById('formPage2').classList.remove('hidden');
      } else {
        form1.reportValidity(); // Show native validation messages
      }
    }

    function goBack() {
      document.getElementById('formPage2').classList.add('hidden');
      document.getElementById('formPage1').classList.remove('hidden');
    }

    document.getElementById("formPage2").addEventListener("submit", function (e) {
      e.preventDefault();

      // Validate project type
      const projectTypeChecked = document.querySelectorAll('input[name="projectType"]:checked');
      if (projectTypeChecked.length === 0) {
        alert("Please select at least one Project Type");
        return;
      }

      // Validate radio group
      const assetsProvided = document.querySelector('input[name="assetsProvided"]:checked');
      if (!assetsProvided) {
        alert("⚠️ Please select whether you will provide assets.");
        document.getElementById("assetsProvidedGroup").scrollIntoView({ behavior: "smooth" });
        return;
      }

      // Validate file upload
      if (fileCount === 0) {
        alert("📁 Please upload a document before submitting.");
        document.getElementById("dropbox").scrollIntoView({ behavior: "smooth" });
        return;
      }

      const formData = new FormData();
      formData.append('firstname', document.querySelector('[name="firstName"]').value);
      formData.append('lastname', document.querySelector('[name="lastName"]').value);
      formData.append('phnumber', document.querySelector('[name="phone"]').value);
      formData.append('email', document.querySelector('[name="email"]').value);
      formData.append('companyname', document.querySelector('[name="company"]').value);
      formData.append('projecttitle', document.querySelector('[name="projectTitle"]').value);
      const selectedTypes = Array.from(document.querySelectorAll('input[name="projectType"]:checked'))
        .map(checkbox => checkbox.value).join(', ');

      formData.append('projecttype', selectedTypes);
      formData.append('assests', document.querySelector('input[name="assetsProvided"]:checked').value);
      formData.append('website', document.querySelector('[name="reference"]').value);

      // Get file
      const file = document.getElementById('fileInput').files[0];
      if (file) {
        formData.append('file', file);
      }
      console.log(formData);
      // Send data to backend
      fetch("https://mwu-form-backend-1.onrender.com/upload", {
        method: "POST",
        body: formData,
      })
        .then(res => res.json())
        .then(data => {
          console.log("Server Response:", data);
          document.getElementById('formPage1').classList.add('hidden');
          document.getElementById('formPage2').classList.add('hidden');
          document.getElementById('thankYouMessage').classList.remove('hidden');
          alert(data.message);
        })
        .catch(err => {
          console.error("Submit Error:", err);
          alert("❌ Error submitting the form");
        });


      //   alert("✅ Form submitted successfully! (Connect to backend here)");
    });

  </script>
</body>

</html>